---
layout:     post
title:      5分钟带你看完 WWDC 2018
subtitle:   WWDC 2018 Keynote 全记录
date:       2018-06-05
author:     BY
header-img: img/post-bg-cook.jpg
catalog: true
tags:
    - jvm
---

## 前言

一年一度的 WWDC（苹果全球开发者大会）于北京时间 6月5日 凌晨1点开幕。废话不多说，来看看这次WWDC 都有哪些亮点吧!


## iOS 12 和 ARKit 2.0

>关键词：官方防沉迷最为致命

### iOS 12 

iOS 12 相较于 iOS 11 并没有太多UI上的变动，刚更新完 bate 版本的 iOS 12，完全感觉不到这是个新系统。

iOS 12 主要是对安全和性能的优化，iOS 12 在旧设备上的运行速度比 iOS 11更块，程序加载速度快了一倍。（PS：看来苹果并没有放弃旧设备）

![](https://cdn.mos.cms.futurecdn.net/RdxhPVv8fAyM6oHsRgF6dH-650-80.png)

### ARKit 2.0 

Apple 与 皮克斯 合作开发了一种用于共享AR内容的新文件格式，新的 AR 格式名为 USDZ。

作为一个含着金苹果出生的新生儿，USDZ 一开始就得到了 Adobe Creative Cloud （包括 Photoshop CC、InDesign CC、Illustrator CC、Dreamweaver CC、Premiere Pro CC）套件的支持。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-10.jpg)

同时，面向开发者的开发套件 ARKit 则升级到了二代，主要提升了面部跟踪、渲染能力、3D 探测和共享体验等能力。

随后展示了一款名为 Measure 的 App，可使用AR查看物品大小。

![](https://cdn.mos.cms.futurecdn.net/4tbGCxGUGsH9VwSLsfMDK5-650-80.png)

最后为了演示新的 AR 能力和效果，苹果请来了乐高的创意总监来捧场。这是一个真实的乐高积木建筑物为基础，最多四个人可以用苹果 AR 应用进行游戏，可以在真实环境中模拟出各种虚拟的形象和建筑。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-9.jpg)
![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-11.jpg)

### 相册优化

iOS 12 的相册将大大提升搜索性能，系统不仅会提出搜索建议，还会帮你按主题整理照片。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-13.jpg)

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-14.jpg)

### Siri变得更聪明

iOS 12 中，苹果为 Siri 提供了更加高效的操作，让它可以操作各个应用内部的功能，并且能在锁屏界面建议用户下一步的行动。

苹果还发布了一款名为「Shortcuts」的应用，它允许用户自定义 Siri 搜索指令，支持通过拖拽来快速编辑指令，同时还提供了一个指令库供用户下载现成的命令，就像是为 Siri 打造的 Workflow 自动化工具。

![](https://cdn.sspai.com/2018-06-04-Artboard.jpg?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1)

看到这里，相比熟悉苹果的朋友大概明白了，Siri 的本次改进，很可能是源于它收购的效率神器 Workflow，堪称一个用 Siri 唤醒的 Workflow。

### 原生应用大更新

iOS 12 中，不少原生应用都得到了更新。

- iBooks 更名为 **Apple Books**，采用类似 App Store 的新界面设计。
- 新闻应用（News）在 iPad 上新添加了侧边栏，方便浏览，也突出策划内容。
- 语音备忘录现在支持 iCloud 了
- 股市的界面重构，可以看到股票全天走势，并打通 News 应用，方便看财经新闻；

### CarPlay 开放了

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-21.jpg)

CarPlay 变得更加开放了，曾经被苹果狠心抛弃的 Google Maps 和 Google 的干儿子地图 Waze，以及来自东方的神秘力量高德地图成为首批 CarPlay 支持的第三方导航，从此“志玲姐姐为您导航”将可以常伴林肯领航者车主左右，中国梦和美国梦一起实现。

### 防手机沉迷 - 划重点！

本次 iOS 12 的重点就是：**防沉迷！**

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-25.jpg)

鉴于手机上瘾成为了一个社会议题，今年 Google 和苹果都不约而同地将“防沉迷”加入到了系统更新当中：

- **Do Not Disturb（别吵我）**功能将关掉手机的视觉通知，在夜深人静想起她或梦见她的时候，来了邮件也不会亮屏刺破夜的静谧和黑暗
- Deliver Quietly（安静通知）则是将消息推送静默化、不显示在锁屏，也不出声，也不会在 app 右上角标红
- **Grouped Notifications（分组通知**）可以将某一类型的通知归组，微信群聊消息不再有轰炸的感觉
- **Reports（应用报告）**可以用周报告的形式，告诉用户用什么应用最多，哪个应用通知最多，每天起床第一个打开的是什么应用等等
- **App Limits（应用限制**）可以给某个应用规定使用时间，当然这不是强制性的，用户可以突破限制继续“吃鸡”
- **Allowances（零用钱？）** 是家长限制孩子使用应用的新特性

### iMessage 和 FeacTime

Animoji 新增了 4 个新表情（幽灵，考拉，老虎和霸王龙），用户还可以为自己量身定做 Animoji ，并用到各种场景——这就是全新的 Memoji 技术

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-26.jpg)

![](https://cdn.sspai.com/2018/06/05/67b6fba3d36bdd7caf09bec94dcb157b.jpg?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1)

iOS 版 **FaceTime** 迎来了群聊功能，最多支持 32 人同时聊天，成员可以随时加入或离开聊天。聊天界面用瀑布流的形式呈现，正在说话的成员窗口会自动放大。macOS 版 FaceTime 同样也得到了更新。

![](https://cdn.sspai.com/2018-06-04-Screen%20Shot%202018-06-05%20at%202.00.58%20AM.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1)

## tvOS

> 关键词：优化试听体验

tvOS 今年的变化比较小，更新主要集中在了影视资源以及细节优化上。

Apple TV 4K 将支持杜比全景声和杜比视界，让你在家里也能获得电影院般的听觉体验。

![](https://cdn.sspai.com/2018-06-04-Screen%20Shot%202018-06-05%20at%202.26.21%20AM.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1)

## watchOS 5

> 关键词：运动进行到底

随着 Apple Watch 成长的，还有它的操作系统 watchOS，这一次 watchOS 升级到了第五代。


![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-31.jpg)

Apple Watch 的功能朝着运动的方向发展，此次 watchOS 5 的更新，也以运动为主。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-35.jpg)

watchOS 5 的一个小惊喜是让 Apple Watch 成为了对讲机，这个应用名为 Walkie Talkie（对讲机）。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-38.jpg)


Apple Watch 早就支持了 Apple Pay，不过在通知上，Apple Watch 显然可以做得更多，比如值机和给滴滴师傅付款评分，手表不再只是个通知器，也能做些轻交互。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-51.jpg)

还有 Apple Watch 可以浏览网页了~

## macOS Mojave

> 关键词：夜间模式、全新的App Store

![](https://cdn.sspai.com/2018-06-04-macOS01.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1)

对于大多数人来说，macOS 更新最大的悬念，是新系统叫什么名字。

答案是：**macOS Mojave**，Mojave 中译名是莫哈韦沙漠，位于在美国加利福尼亚西南，出于洛杉矶和拉斯维加斯之间。

在 Mojave 这版系统中，苹果加入了一套适应暗光环境下使用的夜间主题，并对 Mac App Store 的交互界面进行了重塑，整个系统的改变甚至连库克都称为是苹果的一次 “巨大的跨越”。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-89.jpg)

### 夜间模式 / 动态桌面

不少用户会在暗光环境下使用电脑，即便是将屏幕亮度调到最低，也难免会因为白底色为主的主题而感到刺眼。在这次更新中，macOS Mojave 新增加了一套暗色主题，不同于目前将菜单和程序栏调成暗色的选项，新系统上的是一套全局暗色主题，即便是在文件夹、应用里都是以黑色为主色呈现。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-63.jpg)

另外，系统可根据时间变化对桌面进行自动调整，日间使用时系统为正常主题；夜间使用时系统则自动切换至暗色模式主题。此时，台下的开发者们爆发出了一阵欢呼，大概是这个主题能够提升程序员朋友夜间加班的幸福感吧。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-63.jpg)

### 智能分类

macOS 会跟据文件类型和标签对桌面的文件进行自动分类整理，从此再也不用担心满桌面都是文件了。

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-82.jpg)

![](https://cdn.sspai.com/2018-06-04-macOS04.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1)

### 快速查看升级

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-92.jpg)

访达在这次系统上的更新并不多，只是针对图片查看增添了 “图库视图” 功能。通过 “图库视图”，用户可更加便捷快速地浏览到访达文件夹内的图片内容，与此同时功能内部也内置了图片元数据显示窗，用户可以借助数据窗口了解到图片的相关详情，并且可对图片进行快速编辑操作。

### 截图/录屏操作 - 类似iOS

![](https://images.ifanr.cn/wp-content/uploads/2018/06/WWDC-93.jpg)
**jmap**

jdk自带命令。jmap是一个多功能的命令，查看JVM内存使用情况。它可以生成 java 程序的 dump 文件， 也可以查看堆内对象示例的统计信息、查看 ClassLoader 的信息以及 finalizer 队列。

```linux
jmap -dump:live,format=b,file=myjmapfile.txt 19570
```

**jstack**

jdk自带命令。查看运行java程序的java stack和native stack的信息。

```
jstack pid
```

**jstat**

jdk自带命令。可以观察到classloader，compiler，gc相关信息。可以时时监控资源和性能 。

**MAT**

第三方堆栈文件分析工具。下载地址：https://www.eclipse.org/mat/

**jps**

jdk自带命令。查看JVM中运行的进程状态信息。

```
jps [options] [hostid]
```

**jhat**

jdk内置的工具之一。主要是用来分析java堆的命令。可以将堆中的对象以html的形式显示出来，包括对象的数量，大小等等，并支持对象查询语言。使用jmap等方法生成java的堆文件后，使用其进行分析。

**jinfo**
输出jvm各项参数信息，包括默认参数
Jinfo [option] pid

**jstatd**
虚拟机的jstat守护进程，主要用于监控JVM的创建与终止，并提供一个接口允许远程监控工具依附到在本地主机上运行的JVM。
jstatd工具是一个RMI服务器应用程序，主要用于监控HotSpot Java 虚拟机的创建与终止，并提供一个接口以允许远程监控工具附加到本地主机上运行的JVM上。jstatd位于 $JAVA_HOME/bin目录下
jstatd服务器需要在本地主机上存在一个RMI注册表。
**jdb**
jdk自带工具。 JDB是 The Java Debugger 的简称，它可以在命令行下调试Java程序。在JDK自己的bin目录下。

**hprof**

JDK自带一个简单的性能分析工具。常被用于内存使用情况分析。它是一个动态链接库文件，监控CPU的1使用率、内存堆栈分配情况等。使用命令行格式为：

```
java -Xrunhprof ToBeProfiledClass
```

有两种分析方法：内存分配历史的跟踪记录（dump）和将占用内存的对象进行排序（sites）。命令行如下

```
java -Xrunhprof:heap=all|dump|sites ToBeProfiledClass
```

**Java VisualVM**（**jvisualvm**）

即jvisualvm，Netbeans的profile子项目，已在JDK6.0 update 7 中自带，能够监控线程，内存情况，查看方法的CPU时间和内存中的对 象，已被GC的对象，反向查看分配的堆栈。Jvisualvm动态分析jvm内存情况和gc情况，插件：visualGC.

在JDK_HOME/bin(默认是C:\Program Files\Java\jdk1.6.0_13\bin)目录下面，有一个jvisualvm.exe文件，双击打开。启动起来后和jconsole 一样同样可以选择本地和远程，如果需要监控远程同样需要配置相关参数。

**ab 、abs**

ab是apache 推出的压力测试工具，可以用来测试http服务器的性能，得出QPS。全称：Apache HTTP server benchmarking tool

abs 则是apache 推出的压力测试工具，可以用来测试https服务器的性能，得出QPS
工具下载地址：https://www.apachehaus.com/cgi-bin/download.plx
工具官方文档地址：http://httpd.apache.org/docs/2.4/programs/ab.html
用法简介：下载工具进入Apache24/bin目录下载就可以看到ab.exe和abs.exe
在命令行中输入

```
ab -n 1000 -c 20 http://127.0.0.1:8080/
```

-n 要发多少个请求数
-c 每次进行多少请求
注意：必须是 http://127.0.0.1:8080/ ，“/” 不可以被省略，测试地址必须是一个url。

**jconsole**
jdk自带命令。可视化监控jvm

**gc log**

gc时打印出来的日志。

在jvm启动参数加上以下，可以开启gc log,配置gclog的输出位置

```java
-XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xloggc:/usr/local/project/jvmtest/gc.log
```

**jcmd**

在JDK1.7以后新增的一个命令行工具。可以用它来导出堆、查看Java进程、导出线程信息、执行GC、还可以进行采样分析（jmc 工具的飞行记录器）。

**GCViewer**
日志可视化分析工具。
下载地址：http://www.tagtraum.com/gcviewer.html

**GCHisto**

日志分析工具。

下载：http://java.net/projects/gchisto
直接点击gchisto.jar就可以运行，点add载入gc.log

**GCLogViewer**

日志分析工具。

下载：http://code.google.com/p/gclogviewer/
点击run.bat运行
整个过程gc情况的趋势图，还显示了gc类型，吞吐量，平均gc频率，内存变化趋势等
Tools里还能比较不同gc日志

**HPjmeter**
日志分析工具。
下载地址： http://www.hp.com/go/java
工具很强大，但只能打开由以下参数生成的GC log， -verbose:gc -Xloggc:gc.log,添加其他参数生成的gc.log无法打开。

**garbagecat**

日志分析工具。

http://code.google.com/a/eclipselabs.org/p/garbagecat/wiki/Documentation

**Jprofiler**

JProfiler是由ej-technologies GmbH公司开发的一款性能瓶颈分析工具.

下载：https://www.ej-technologies.com/products/jprofiler/overview.html

**GCeasy**
一款超好用的在线分析GC日志的网站
网址：https://www.gceasy.io/

**jpda**
java远程调试工具。JPDA（Java Platform Debugger Architecture）是Java平台调试体系结构的缩写。由3个规范组成，分别是JVMTI(JVM Tool Interface)，JDWP(Java Debug Wire Protocol)，JDI(Java Debug Interface) 。

**top**

linux命令。实时显示正在执行进程的 CPU 使用率、内存使用率以及系统负载等信息。

```
top Hp pid
```

查看具体线程使用系统资源情况

**vmstat**

linux命令。监测指定采样周期和次数。它不仅可以统计内存的使用情况，还可以观测到 CPU 的使用率、swap 的使用情况。但 vmstat 一般很少用来查看内存的使用情况，而是经常被用来观察进程的上下文切换。Virtual Meomory Statistics（虚拟内存统计）的缩写，可对操作系统的虚拟内存、进程、CPU活动进行监控。

**pidstat**

linux命令。pidstat是 Sysstat 中的一个组件；可以通过yum install sysstat 安装该监控组件。pidstat 命令则是深入到线程级别的监测工具。

**gdb**
linux命令。是一个由GNU开源组织发布的、UNIX/LINUX操作系统下的、基于命令行的、功能强大的程序调试工具。

**nmon**
Linux工具。很轻松的监控Linux系统的 CPU、内存、网络、硬盘、文件系统、NFS、高耗进程、资源和 IBM Power 系统的微分区的信息）。
下载：http://nmon.sourceforge.net/pmwiki.php?n=Site.Downlo



**JMeter**
Apache JMeter为一款广为流传的开源压测产品，最初被设计用于Web应用测试，如今JMeter可以用于测试静态和动态资源，例如静态文件、Java 小服务程序、CGI 脚本、Java 对象、数据库、FTP服务器等等，还能对服务器、网络或对象模拟巨大的负载，通过不同压力类别测试它们的强度和分析整体性能。另外，JMeter能够对应用程序做功能测试和回归测试，通过创建带有断言的脚本来验证你的程序返回了你期望的结果。为了最大限度的灵活性，JMeter允许使用正则表达式创建断言。
JMeter的特点包括对HTTP、FTP服务器、数据库进行压力测试和性能测试；完全的可移植性；完全 Swing和轻量组件支持包；完全多线程；缓存和离线分析/回放测试结果；可链接的取样器；具有提供动态输入到测试的功能；支持脚本编程的取样器等。在设计阶段，JMeter能够充当HTTP PROXY（代理）来记录浏览器的HTTP请求，也可以记录Apache等WebServer的log文件来重现HTTP流量，并在测试运行时以此为依据设置重复次数和并发度（线程数）来进行压测。

类似的压测工具还有：LoadRunner、NeoLoad、WebLOAD、Loadster、Load impact、CloudTest、Loadstorm、阿里云PTS、压测宝、
更多压测工具详情：https://blog.csdn.net/langzitianya/article/details/81479422

**sar**
linux命令。（System Activity Reporter 系统活动情况报告）是目前 Linux 上最为全面的系统性能分析工具之一，可以从多方面对系统的活动进行报告，包括：文件的读写情况、系统调用的使用情况、磁盘 I/O、CPU 效率、内存使用状况、进程活动及 IPC 有关的活动等。
**free** 
linux命令。显示系统内存的使用情况，包括物理内存、交换内存(swap)和内核缓冲区内存。

**iostat**
linux命令。是I/O statistics（输入/输出统计）的缩写，iostat工具将对系统的磁盘操作活动进行监视。它的特点是汇报磁盘活动统计情况，同时也会汇报出CPU使用情况。iostat也有一个弱点，就是它不能对某个进程进行深入分析，仅对系统的整体情况进行分析。iostat属于sysstat软件包。可以用yum直接安装。
**tee**
linux命令用于读取标准输入的数据，并将其内容输出成文件。
tee指令会从标准输入设备读取数据，将其内容输出到标准输出设备，同时保存成文件。
